{% extends "base.html" %}

{% block content %}
<div class="page-header">
    <h1>Results</h1>

    <table class="rows">
      <tr>
        <td><div id="chart_div"></div></td>



        <tr>

            <td><div id="table_div"></div></td>
        </tr>

    </table>
</div>

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
  google.load('visualization', '1', {'packages':['corechart', 'table']});
  function initialize() {
        var opts = {sendMethod: 'auto'};
        // Replace the data source URL on next line with your data source URL.
        var query = new google.visualization.Query('https://docs.google.com/spreadsheets/d/1NczveXusXsH7IP5GYZHIN0wwjDvpkZPf2inklb4-5eM/edit?usp=sharing', opts);
        -
        // Optional request to return only column C and the sum of column B, grouped by C members.
        //query.setQuery('select C, sum(B) group by C');

        // Send the query with a callback function.
        query.send(handleQueryResponse);
}

function handleQueryResponse(response) {
      if (response.isError()) {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }

    var data = response.getDataTable();

  var options = {
    title: 'Average number of emoticons in tweet with specified keyword',
      legend: 'none',
      vAxis: { title: 'Average number of emoticons per 1000 tweets' },
      width: $(window).width()*0.9,
      height: $(window).height() * 0.3
  };

  var chart = new google.visualization.Table(document.getElementById('chart_div'));

  chart.draw(data, options);

    }
  function initialize2() {
        var opts = {sendMethod: 'auto'};
        // Replace the data source URL on next line with your data source URL.
        var query2= new google.visualization.Query('https://docs.google.com/spreadsheets/d/1NczveXusXsH7IP5GYZHIN0wwjDvpkZPf2inklb4-5eM/edit?usp=sharing', opts);
        -
        // Optional request to return only column C and the sum of column B, grouped by C members.
        //query.setQuery('select C, sum(B) group by C');

        // Send the query with a callback function.
        query2.send(handleQueryResponse2);
}

function handleQueryResponse2(response) {
      if (response.isError()) {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }

    var data2 = response.getDataTable();

  var options2 = {
      title: 'Keyword popularity (Tue Apr/04/2017 8AM)',
      legend: 'none',
      vAxis: {
          title: 'keyword',
          minvalue: 0
      },
      hAxis: {title: 'number of posts per 60sec'},
      width: $(window).width()*0.9,
      height: $(window).height() * 0.5
  }

  var chart2 = new google.visualization.BarChart(document.getElementById('B_chart_div'));

   chart2.draw(data2, options2);


}
 function initialize3() {
        var opts = {sendMethod: 'auto'};
        // Replace the data source URL on next line with your data source URL.
        var query3= new google.visualization.Query('https://docs.google.com/spreadsheets/d/1RLsadHA4eyvUhetRlFQMEhV5laHkb8zWMBtD-_OBk0M/edit?usp=sharing', opts);
        -
        // Optional request to return only column C and the sum of column B, grouped by C members.
        //query.setQuery('select C, sum(B) group by C');

        // Send the query with a callback function.
        query3.send(handleQueryResponse3);
}

function handleQueryResponse3(response) {
      if (response.isError()) {
        alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
        return;
      }

    var data3 = response.getDataTable();

  var options3 = {
      title: 'table title',
      width: $(window).width()*0.9,
      height: $(window).height() * 0.5
  }

  var table = new google.visualization.Table(document.getElementById('table_div'));

   table.draw(data3, options3);


}

      google.setOnLoadCallback(initialize);
      google.setOnLoadCallback(initialize2);
       google.setOnLoadCallback(initialize3);




  </script>

{% endblock %}

